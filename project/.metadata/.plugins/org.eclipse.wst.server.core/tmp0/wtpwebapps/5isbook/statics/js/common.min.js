(function(w,C){function v(){var e=D.elements;return"string"==typeof e?e.split(" "):e}function z(f){var e=u[f[d]];e||(e={},A++,f[d]=A,u[A]=e);return e}function c(f,e,g){e||(e=C);if(B){return e.createElement(f)}g||(g=z(e));e=g.cache[f]?g.cache[f].cloneNode():a.test(f)?(g.cache[f]=g.createElem(f)).cloneNode():g.createElem(f);return e.canHaveChildren&&!F.test(f)?g.frag.appendChild(e):e}function E(f,e){if(!e.cache){e.cache={},e.createElem=f.createElement,e.createFrag=f.createDocumentFragment,e.frag=e.createFrag()}f.createElement=function(g){return !D.shivMethods?e.createElem(g):c(g,f,e)};f.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+v().join().replace(/\w+/g,function(g){e.createElem(g);e.frag.createElement(g);return'c("'+g+'")'})+");return n}")(D,e.frag)}function b(f){f||(f=C);var e=z(f);if(D.shivCSS&&!y&&!e.hasCSS){var h,g=f;h=g.createElement("p");g=g.getElementsByTagName("head")[0]||g.documentElement;h.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}</style>";h=g.insertBefore(h.lastChild,g.firstChild);e.hasCSS=!!h}B||E(f,e);return f}var x=w.html5||{},F=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,a=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,y,d="_html5shiv",A=0,u={},B;(function(){try{var f=C.createElement("a");f.innerHTML="<xyz></xyz>";y="hidden" in f;var e;if(!(e=1==f.childNodes.length)){C.createElement("a");var h=C.createDocumentFragment();e="undefined"==typeof h.cloneNode||"undefined"==typeof h.createDocumentFragment||"undefined"==typeof h.createElement}B=e}catch(g){B=y=!0}})();var D={elements:x.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video",version:"3.6.2pre",shivCSS:!1!==x.shivCSS,supportsUnknownElements:B,shivMethods:!1!==x.shivMethods,type:"default",shivDocument:b,createElement:c,createDocumentFragment:function(g,f){g||(g=C);if(B){return g.createDocumentFragment()}for(var f=f||z(g),l=f.frag.cloneNode(),k=0,j=v(),i=j.length;k<i;k++){l.createElement(j[k])}return l}};w.html5=D;b(C)})(this,document);(function(){if(!0){return}var b="abbr, article, aside, audio, canvas, datalist, details, dialog, eventsource, figure, footer, header, hgroup, mark, menu, meter, nav, output, progress, section, time, video".split(", ");var a=b.length;while(a--){document.createElement(b[a])}})();$(function(){if(window.PIE){$(".rounded").each(function(){PIE.attach(this)})}});function isIE(){if(window.navigator.userAgent.toLowerCase().indexOf("msie")>=1){return true}else{return false}}if(!isIE()){HTMLElement.prototype.__defineGetter__("innerText",function(){var b="";var c=this.childNodes;for(var a=0;a<c.length;a++){if(c[a].nodeType==1){b+=c[a].innerText}else{if(c[a].nodeType==3){b+=c[a].nodeValue}}}return b});HTMLElement.prototype.__defineSetter__("innerText",function(a){this.textContent=a;Webjx.Com})}function accAdd(f,d){var c,b,a;try{c=f.toString().split(".")[1].length}catch(g){c=0}try{b=d.toString().split(".")[1].length}catch(g){b=0}a=Math.pow(10,Math.max(c,b));return(f*a+d*a)/a}Number.prototype.add=function(a){return accAdd(a,this)};function accSub(b,a){return accAdd(b,-a)}Number.prototype.sub=function(a){return accSub(this,a)};function accMul(d,b){var a=0,f=d.toString(),c=b.toString();try{a+=f.split(".")[1].length}catch(g){}try{a+=c.split(".")[1].length}catch(g){}return Number(f.replace(".",""))*Number(c.replace(".",""))/Math.pow(10,a)}Number.prototype.mul=function(a){return accMul(a,this)};function accDiv(arg1,arg2){var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}with(Math){r1=Number(arg1.toString().replace(".",""));r2=Number(arg2.toString().replace(".",""));return(r1/r2)*pow(10,t2-t1)}}Number.prototype.div=function(a){return accDiv(this,a)};function IsNum(a){if(a!=null&&a!=""){return !isNaN(a)}return false}$(".logined-state").hover(function(){var a=$(this).find(".logined-opt");var b=$(this).find(".atitle");if(!a.is(":animated")){a.stop(true).show(0);b.css({"background-color":"white",color:"#888"})}},function(){var a=$(this).find(".logined-opt");var b=$(this).find(".atitle");if(!a.is(":animated")){a.stop(true).hide(0);b.css({"background-color":"#eee",color:"#8BC53F"})}});$("#buycar").hover(function(){$("#buycar").attr("src","statics/images/buycar-select.png")},function(){$("#buycar").attr("src","statics/images/buycar.png")});$("#collect").hover(function(){$("#collect").attr("src","statics/images/collect-select.png")},function(){$("#collect").attr("src","statics/images/collect.png")});$loginOpt=$(".logined-opt");$loginOpt.hide();$(".log").hover(function(){$(this).css({"background-color":"#484848"});$loginOpt.show()},function(){$(this).css({"background-color":"#117788"});$loginOpt.hide()});$(".sidebar-title").toggle(function(){var a=$(this).siblings(".sidebar-list");if(!a.is(":animated")){a.stop(true).hide(150)}},function(){var a=$(this).siblings(".sidebar-list");if(!a.is(":animated")){a.stop(true).show(150)}});$(".item-detail").hover(function(){var a=$(this).find(".item-detail-second");if(!a.is(":animated")){a.stop(true).show(100)}},function(){var a=$(this).find(".item-detail-second");a.stop(true).hide(100)});$(window).bind("scroll",function(){t=$(document).scrollTop();if(t>90.5){$(".front-bar").addClass("fixedfrontbar")}else{$(".front-bar").removeClass("fixedfrontbar")}});var page=1;var pageTotal=7;$(".next").click(function(){var c=$(this).parents("div.bookcontainer");var a=c.find("div.booklist");var b=c.attr("data-page");if(!a.is(":animated")){if(b==pageTotal){a.animate({"margin-left":"0px"},100);c.attr("data-page",1)}else{a.animate({"margin-left":"-=140px"},100);b++;c.attr("data-page",b)}}});$(".prev").click(function(){var c=$(this).parents("div.bookcontainer");var a=c.find("div.booklist");var b=c.attr("data-page");if(!a.is(":animated")){if(b==1){a.animate({"margin-left":"-=840px"},100);c.attr("data-page",pageTotal)}else{a.animate({"margin-left":"+=140px"},100);b--;c.attr("data-page",b)}}});$("button[rel=popover]").hover(function(a){$(this).stop(true).popover("show")},function(a){if(!$(this).is(":animated")){$(this).stop(true).popover("hide")}});window.onload=function loadFreshSum(){$list=$(".goodslist");$sumlist=$list.find(".item");if($sumlist.length<=0){var a=$("<p>购物车空空如也，还不赶紧去[<a href=''>淘货</a>]~</p>");a.css({"font-size":"18px",margin:"30px","text-align":"center"});$list.append(a)}$.each($sumlist,function(){var b=$(this).find(".plus");freshSum(b)})};$(function(){$(".del").click(function(){var b=$(this).parents(".item");var c=confirm("是否删除该商品?");if(c==false){return false}});$(".minus").click(function(){var b=$(this).siblings(".inputbox");var c=parseInt(b.attr("data-now"));var e=b.attr("data-id");var d=$(this);if(c>1){$.ajax({type:"get",url:"/5isbook/cart/decrease.action",data:{id:e,num:1},success:function(f){if(String($.trim(f))=="true"){b.attr("data-now",--c);b.attr("value",c);a(d)}else{alert("添加失败请重试")}},error:function(){alert("添加失败请重试")}})}return false});$(".plus").click(function(){var c=$(this).siblings(".inputbox");var d=parseInt(c.attr("data-now"));var b=parseInt(c.attr("data-max"));var f=c.attr("data-id");var e=$(this);if(d<b){$.ajax({type:"get",url:"/5isbook/cart/increase.action",data:{id:f,num:1},success:function(g){if(String($.trim(g))=="true"){c.attr("data-now",++d);c.attr("value",d);a(e)}else{alert("添加失败请重试")}},error:function(){alert("添加失败请重试")}})}else{alert("超过了最大数量")}return false});function a(g){var f=g.parents(".buy-detail");var e=f.find(".sum");var c=f.find(".price");var b=f.find(".copy").find(".inputbox");var d=parseFloat(c.text()).mul(b.attr("data-now"));if(d<=0){alert("数量不能为0哦。");g.siblings(".inputbox").attr("data-now",1).attr("value",1)}else{e.text(d)}freshAllSum()}});function freshAllSum(){var a=0;$(".sum").each(function(){a+=parseFloat($(this).text())});$(".allsumnum").text(a)}var $num=$(".num");var $numInput=$num.find(".inputbox");var $restNum=$num.find("#restNum");var $opt=$num.find(".opt");var $typeBox=$(".typeBox");var $typeBoxInput=$('input[name="goodsType"]');var $pricenow=$("#pricenow");window.onload=function freshRestNum(){$inputnow=$('input[name="goodsType"]:checked');$targetInput=$('input[name="buyNum"]');rest=parseInt($inputnow.attr("data-rest"));$restNum.text(rest);$targetInput.attr("data-max",rest);isRestZero(rest)};$(".inputbox").blur(function(){var b=$(this).val().trim();var c=$this.attr("data-id");if(!IsNum(b)||b==null||b==""){$(this).attr("data-now","1");$(this).attr("value","1");return false}else{var d=parseInt(b);if(d<=0){$(this).attr("data-now","1");$(this).attr("value","1");return false}var a=parseInt($(this).attr("data-max"));if(d>a){d=a}$(this).attr("data-now",d.toString());$(this).attr("value",d.toString());freshSum($(this))}});function isRestZero(a){if(a==0){$opt.hide()}else{$opt.show()}}$(".dminus").click(function(){var a=$(this).siblings(".inputbox");var b=parseInt(a.attr("data-now"));if(b>1){b--;a.attr("data-now",b);a.attr("value",b)}});$(".dplus").click(function(){var b=$(this).siblings(".inputbox");var c=parseInt(b.attr("data-now"));var a=parseInt(b.attr("data-max"));if(c<a){c++;b.attr("data-now",c).attr("value",c)}else{alert("超过了最大数量")}});$(".typeBox").click(function(){var a=$(this).siblings("input");var b=parseInt(a.attr("data-rest"));var c=a.attr("data-price");$.each($typeBox,function(){$(this).removeClass("selected")});$.each($typeBoxInput,function(){$(this).attr("checked","")});$(this).addClass("selected");a.attr("checked","checked");$pricenow.text(c);$numInput.attr("data-now",1);$numInput.attr("data-value",1);$numInput.attr("data-max",b);$restNum.text(b);isRestZero(b)});$("#addCartBtn").click(function(){if(parseInt($restNum.text())==0){return false}else{this.submit()}});$(".num>.inputbox").blur(function(){var b=$(this).val().trim();if(!IsNum(b)||b==null||b==""){$(this).attr("data-now","1");$(this).attr("value","1");return false}else{var c=parseInt(b);if(c<=0){$(this).attr("data-now","1");$(this).attr("value","1");return false}var a=parseInt($(this).attr("data-max"));if(c>a){c=a}$(this).attr("data-now",c.toString());$(this).attr("value",c.toString())}});var $addressAry=$('input[name="addressId"]');var $dateAry=$('input[name="deliveryTimeId"]');$(function(){$("#cancelBtn").click(function(){var d=confirm("真的要取消订单？");if(d){alert("订单已取消！");window.location="Home.jsp"}else{return false}});function b(e,d){if(d==0){e.addClass("redborder").find(".ok").stop(true).show(0)}else{e.removeClass("redborder").find(".ok").stop(true).hide(0)}}function a(){$.each($addressAry,function(){$(this).attr("checked","")})}function c(d){var e=d.find('input[name="addressId"]');e.attr("checked","checked")}$(".addressbox").click(function(){if(!$(this).hasClass("redborder")){var d=new Array();d=$(".addressbox");$.each(d,function(){b($(this),1)});a();b($(this),0);c($(this))}else{return false}})});$(function(){$("#message").fadeIn("slow").fadeTo(3000,0.99).fadeOut("slow");$(".checked").blur(function(){if($(this).val()==""||$(this).val().trim()==""){$(this).siblings("#nametip").removeClass("hide")}else{$(this).siblings("#nametip").addClass("hide")}});var b=$("#confirmPassword");var a=$("#newPassword");b.blur(function(){if($(this).val()!=a.val()){$(this).siblings("#notmatchtip").removeClass("hide");return false}else{$(this).siblings("#notmatchtip").addClass("hide")}});$("#passwordEditFormBtn").click(function(){var c=b.siblings("#notmatchtip");if(c.hasClass("hide")){$obj.submit()}else{alert("请清除错误再提交!");return false}return false})});